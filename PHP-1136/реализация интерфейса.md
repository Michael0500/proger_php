Ниже приведён **пример полноценного Yii2-проекта** (basic template), в котором объединены все описанные ранее модули:

1. **Модуль шаблонов уведомлений** (NOTIFMGR)
2. **Модуль управления каналами** (Channel Manager)
3. **Модуль отчётности** (Report)
4. **Стартовый контроллер** (SiteController) со стартовой страницей (views/site/index.php)

Все примеры кода можно **скопировать и вставить** в соответствующие файлы в вашем проекте.  
Для удобства всё сведено в одну инструкцию. В итоге вы получите **единый «скелет» проекта**, который можно запустить локально и дорабатывать под реальные нужды.

---

# 1. Структура проекта

После установки Yii2 (через `composer create-project yiisoft/yii2-app-basic my_project`), у вас будет примерно такая структура:

```
my_project/
├─ assets/
├─ commands/
├─ config/
│   ├─ db.php
│   ├─ web.php
│   └─ ... (прочие файлы)
├─ controllers/
│   ├─ SiteController.php
│   ├─ TemplateController.php
│   ├─ ChannelController.php
│   └─ ReportController.php
├─ models/
│   ├─ Template.php
│   ├─ TemplateSearch.php
│   ├─ Channel.php
│   ├─ ChannelSearch.php
│   ├─ ReportRecord.php
│   ├─ ReportSearch.php
│   └─ ...
├─ runtime/
├─ services/
│   ├─ FakeTemplateService.php
│   ├─ FakeChannelService.php
│   └─ FakeReportService.php
├─ vendor/
├─ views/
│   ├─ site/
│   │   └─ index.php
│   ├─ template/
│   │   ├─ index.php
│   │   ├─ view.php
│   │   ├─ create.php
│   │   ├─ update.php
│   │   └─ _form.php
│   ├─ channel/
│   │   ├─ index.php
│   │   ├─ view.php
│   │   ├─ create.php
│   │   ├─ update.php
│   │   └─ _form.php
│   └─ report/
│       ├─ index.php
│       ├─ operational.php
│       └─ (возможно) historical.php
└─ web/
    ├─ index.php
    └─ ...
```

Ниже — **подробный код** основных файлов. Не забудьте поправить namespace'ы, если вы изменяете структуру.

---

# 2. Файлы конфигурации

## 2.1. `config/web.php` (минимальный вариант)

```php
<?php

$params = require __DIR__ . '/params.php';
$db = require __DIR__ . '/db.php';

$config = [
    'id' => 'basic',
    'basePath' => dirname(__DIR__),
    'bootstrap' => ['log'],
    'components' => [
        'request' => [
            // !!! Укажите уникальный ключ здесь !!!
            'cookieValidationKey' => 'enter-your-secret-key',
        ],
        'cache' => [
            'class' => \yii\caching\FileCache::class,
        ],
        'user' => [
            'identityClass' => \app\models\User::class, // Если нужно
            'enableAutoLogin' => true,
        ],
        'errorHandler' => [
            'errorAction' => 'site/error',
        ],
        // 'db' => $db, // Раскомментируйте, если нужна база
        'log' => [
            'traceLevel' => YII_DEBUG ? 3 : 0,
            'targets' => [
                [
                    'class' => \yii\log\FileTarget::class,
                    'levels' => ['error', 'warning'],
                ],
            ],
        ],
        'urlManager' => [
            'enablePrettyUrl' => true,
            'showScriptName' => false,
            'rules' => [
                // при необходимости добавьте правила
            ],
        ],
    ],
    'params' => $params,
];

return $config;
```

---

# 3. Контроллеры (папка `controllers/`)

## 3.1. `SiteController.php` (стартовый контроллер)

```php
<?php
namespace app\controllers;

use Yii;
use yii\web\Controller;

class SiteController extends Controller
{
    /**
     * Стартовая страница ("/")
     */
    public function actionIndex()
    {
        return $this->render('index');
    }

    /**
     * Стандартная страница ошибок
     */
    public function actionError()
    {
        $exception = Yii::$app->errorHandler->exception;
        if ($exception === null) {
            return 'No errors.';
        }
        return $this->render('error', ['exception' => $exception]);
    }

    // Можно добавить экшены login, logout и т.п., если нужно
}
```

---

## 3.2. `TemplateController.php` (модуль шаблонов уведомлений)

```php
<?php
namespace app\controllers;

use Yii;
use yii\web\Controller;
use yii\web\NotFoundHttpException;
use app\models\Template;
use app\models\TemplateSearch;
use app\services\FakeTemplateService;

class TemplateController extends Controller
{
    /**
     * Список шаблонов (GridView + фильтры)
     */
    public function actionIndex()
    {
        $searchModel = new TemplateSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);

        return $this->render('index', [
            'searchModel'  => $searchModel,
            'dataProvider' => $dataProvider,
        ]);
    }

    /**
     * Просмотр одного шаблона (DetailView)
     */
    public function actionView($id)
    {
        $arr = FakeTemplateService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Шаблон не найден');
        }
        $model = Template::fromArray($arr);

        return $this->render('view', [
            'model' => $model,
        ]);
    }

    /**
     * Создание нового шаблона (mock)
     */
    public function actionCreate()
    {
        $model = new Template();

        if ($model->load(Yii::$app->request->post()) && $model->validate()) {
            FakeTemplateService::save($model->attributes);
            Yii::$app->session->setFlash('success', 'Шаблон уведомлений создан (mock).');
            return $this->redirect(['index']);
        }

        return $this->render('create', [
            'model' => $model,
        ]);
    }

    /**
     * Редактирование (mock)
     */
    public function actionUpdate($id)
    {
        $arr = FakeTemplateService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Шаблон не найден');
        }
        $model = Template::fromArray($arr);

        if ($model->load(Yii::$app->request->post()) && $model->validate()) {
            FakeTemplateService::save($model->attributes);
            Yii::$app->session->setFlash('success', 'Шаблон уведомлений обновлён (mock).');
            return $this->redirect(['view', 'id' => $model->template_id]);
        }

        return $this->render('update', [
            'model' => $model,
        ]);
    }

    /**
     * Пример экшена для «Выгрузить в Excel/CSV» (упрощённо)
     */
    public function actionExport()
    {
        $searchModel = new TemplateSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);
        $models = $dataProvider->getModels();

        // Упрощённая CSV-выгрузка
        $csv = "ID;Name;Contract;Client;Product;Status\n";
        foreach ($models as $m) {
            $csv .= implode(';', [
                $m['template_id'],
                $m['template_name'],
                $m['contract_id'],
                $m['client_id'],
                $m['product'],
                $m['status'],
            ]);
            $csv .= "\n";
        }

        Yii::$app->response->format = \yii\web\Response::FORMAT_RAW;
        $headers = Yii::$app->response->headers;
        $headers->add('Content-Type', 'text/csv; charset=utf-8');
        $headers->add('Content-Disposition', 'attachment; filename="templates.csv"');

        return $csv;
    }
}
```

---

## 3.3. `ChannelController.php` (модуль управления каналами)

```php
<?php
namespace app\controllers;

use Yii;
use yii\web\Controller;
use yii\web\NotFoundHttpException;
use app\models\Channel;
use app\models\ChannelSearch;
use app\services\FakeChannelService;

class ChannelController extends Controller
{
    public function actionIndex()
    {
        $searchModel = new ChannelSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);

        return $this->render('index', [
            'searchModel'  => $searchModel,
            'dataProvider' => $dataProvider,
        ]);
    }

    public function actionView($id)
    {
        $arr = FakeChannelService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Канал не найден');
        }
        $model = Channel::fromArray($arr);

        return $this->render('view', [
            'model' => $model,
        ]);
    }

    public function actionCreate()
    {
        $model = new Channel();

        if ($model->load(Yii::$app->request->post()) && $model->validate()) {
            FakeChannelService::save($model->attributes);
            Yii::$app->session->setFlash('success', 'Канал создан (mock).');
            return $this->redirect(['index']);
        }
        return $this->render('create', [
            'model' => $model,
        ]);
    }

    public function actionUpdate($id)
    {
        $arr = FakeChannelService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Канал не найден');
        }
        $model = Channel::fromArray($arr);

        if ($model->load(Yii::$app->request->post()) && $model->validate()) {
            FakeChannelService::save($model->attributes);
            Yii::$app->session->setFlash('success','Канал обновлён (mock).');
            return $this->redirect(['view','id'=>$model->id]);
        }
        return $this->render('update', [
            'model'=>$model
        ]);
    }

    public function actionStop($id)
    {
        $arr = FakeChannelService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Канал не найден');
        }
        $arr['status'] = 'Stopped';
        FakeChannelService::save($arr);
        Yii::$app->session->setFlash('warning','Канал приостановлен (mock).');
        return $this->redirect(['view','id'=>$id]);
    }

    public function actionResume($id)
    {
        $arr = FakeChannelService::getById($id);
        if (!$arr) {
            throw new NotFoundHttpException('Канал не найден');
        }
        $arr['status'] = 'Active';
        FakeChannelService::save($arr);
        Yii::$app->session->setFlash('success','Канал возобновлён (mock).');
        return $this->redirect(['view','id'=>$id]);
    }
}
```

---

## 3.4. `ReportController.php` (модуль отчётности)

```php
<?php
namespace app\controllers;

use Yii;
use yii\web\Controller;
use yii\data\ArrayDataProvider;
use app\models\ReportSearch;
use app\services\FakeReportService;

class ReportController extends Controller
{
    public function actionIndex()
    {
        $searchModel = new ReportSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);

        return $this->render('index', [
            'searchModel'  => $searchModel,
            'dataProvider' => $dataProvider,
        ]);
    }

    /**
     * Оперативный отчёт (без пагинации)
     */
    public function actionOperational()
    {
        $searchModel = new ReportSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);
        $dataProvider->pagination = false; // показываем все

        return $this->render('operational', [
            'searchModel'  => $searchModel,
            'dataProvider' => $dataProvider,
        ]);
    }

    /**
     * Исторический отчёт (прямое формирование CSV)
     */
    public function actionHistorical()
    {
        $searchModel = new ReportSearch();
        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);
        $models = $dataProvider->getModels();

        $csv = "TemplateID;TemplateName;ClientID;Status;Planned;Actual\n";
        foreach ($models as $m) {
            $csv .= implode(';', [
                $m['template_id'],
                $m['template_name'],
                $m['client_id'],
                $m['status'],
                $m['planned_send_date'] ?: '',
                $m['actual_send_date'] ?: '',
            ]) . "\n";
        }

        Yii::$app->response->format = \yii\web\Response::FORMAT_RAW;
        $headers = Yii::$app->response->headers;
        $headers->add('Content-Type','text/csv; charset=utf-8');
        $headers->add('Content-Disposition','attachment; filename="historical_report.csv"');

        return $csv;
    }

    /**
     * Пример «Выгрузить»
     */
    public function actionExport()
    {
        // Аналогично можно сформировать PDF/XLSX
        return 'Выгрузка (mock).';
    }
}
```

---

# 4. Модели (папка `models/`)

## 4.1. `Template.php`

```php
<?php
namespace app\models;

use yii\base\Model;

/**
 * Модель для шаблонов уведомлений (NOTIFMGR)
 */
class Template extends Model
{
    public $template_id;
    public $template_name;
    public $contract_id;
    public $client_id;
    public $product;
    public $client_segment;
    public $creation_date;
    public $status;
    public $send_date;
    public $send_status;   // Если нужно отдельное поле под статус отправки
    public $mobile_phone;
    public $email;
    public $channel;
    public $comment;

    public function rules()
    {
        return [
            [['template_name','contract_id','client_id'], 'required'],
            [['template_id'], 'integer'],
            [['creation_date','send_date'], 'safe'],
            [['status','send_status','comment','channel','product','client_segment'], 'string'],
            [['template_name','contract_id','client_id','mobile_phone','email'], 'string','max'=>255],
        ];
    }

    public function attributeLabels()
    {
        return [
            'template_id'    => 'ID Шаблона',
            'template_name'  => 'Наименование шаблона',
            'contract_id'    => 'ID Договора',
            'client_id'      => 'ID Клиента',
            'product'        => 'Продукт',
            'client_segment' => 'Клиентский сегмент',
            'creation_date'  => 'Дата создания',
            'status'         => 'Статус (шаблона)',
            'send_date'      => 'Дата отправки',
            'send_status'    => 'Статус отправки',
            'mobile_phone'   => 'Мобильный телефон',
            'email'          => 'E-mail',
            'channel'        => 'Канал',
            'comment'        => 'Комментарий (ошибки и т.д.)',
        ];
    }

    public static function fromArray(array $arr)
    {
        $m = new self();
        $m->attributes = $arr;
        return $m;
    }
}
```

## 4.2. `TemplateSearch.php`

```php
<?php
namespace app\models;

use yii\base\Model;
use yii\data\ArrayDataProvider;
use app\services\FakeTemplateService;

/**
 * Модель поиска для шаблонов
 */
class TemplateSearch extends Model
{
    public $template_id;
    public $template_name;
    public $status;
    public $channel;
    public $client_id;
    public $creation_date;

    public function rules()
    {
        return [
            [['template_id'], 'integer'],
            [['template_name','status','channel','client_id','creation_date'], 'safe'],
        ];
    }

    public function search($params)
    {
        $this->load($params);
        $all = FakeTemplateService::getAll();

        // Фильтрация
        if ($this->template_id) {
            $all = array_filter($all, fn($r)=>$r['template_id'] == $this->template_id);
        }
        if ($this->template_name) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['template_name'],$this->template_name)!==false
            );
        }
        if ($this->status) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['status']??'', $this->status)!==false
            );
        }
        if ($this->channel) {
            $all = array_filter($all, fn($r)=>
                isset($r['channel']) && mb_stripos($r['channel'],$this->channel)!==false
            );
        }
        if ($this->client_id) {
            $all = array_filter($all, fn($r)=>
                isset($r['client_id']) && mb_stripos($r['client_id'],$this->client_id)!==false
            );
        }
        if ($this->creation_date) {
            // упрощённый пример: точное совпадение
            $all = array_filter($all, fn($r)=>
                isset($r['creation_date']) && $r['creation_date']==$this->creation_date
            );
        }

        // Готовим DataProvider
        $dataProvider = new ArrayDataProvider([
            'allModels'=>array_values($all),
            'pagination'=>[
                'pageSize'=>10
            ],
            'sort'=>[
                'attributes'=>[
                    'template_id','template_name','creation_date','status'
                ],
                'defaultOrder'=>['template_id'=>SORT_ASC],
            ]
        ]);

        return $dataProvider;
    }
}
```

---

## 4.3. `Channel.php`

```php
<?php
namespace app\models;

use yii\base\Model;

class Channel extends Model
{
    public $id;
    public $channel_name;
    public $description;
    public $status;
    public $max_length;
    public $time_window;

    public function rules()
    {
        return [
            [['channel_name','status'], 'required'],
            [['id','max_length'], 'integer'],
            [['description','time_window'], 'string','max'=>255],
            [['channel_name'], 'string','max'=>100],
            [['status'], 'string','max'=>50],
        ];
    }

    public function attributeLabels()
    {
        return [
            'id'           => 'ID Канала',
            'channel_name' => 'Наименование канала',
            'description'  => 'Описание',
            'status'       => 'Статус',
            'max_length'   => 'Макс. длина',
            'time_window'  => 'Временное окно',
        ];
    }

    public static function fromArray($arr)
    {
        $m = new self();
        $m->attributes = $arr;
        return $m;
    }
}
```

## 4.4. `ChannelSearch.php`

```php
<?php
namespace app\models;

use yii\base\Model;
use yii\data\ArrayDataProvider;
use app\services\FakeChannelService;

class ChannelSearch extends Model
{
    public $id;
    public $channel_name;
    public $status;

    public function rules()
    {
        return [
            [['id'], 'integer'],
            [['channel_name','status'], 'safe'],
        ];
    }

    public function search($params)
    {
        $this->load($params);
        $all = FakeChannelService::getAll();

        if ($this->id) {
            $all = array_filter($all, fn($c)=>$c['id']==$this->id);
        }
        if ($this->channel_name) {
            $all = array_filter($all, fn($c)=>
                mb_stripos($c['channel_name'],$this->channel_name)!==false
            );
        }
        if ($this->status) {
            $all = array_filter($all, fn($c)=>
                mb_stripos($c['status'],$this->status)!==false
            );
        }

        return new ArrayDataProvider([
            'allModels'=>array_values($all),
            'pagination'=>['pageSize'=>10],
            'sort'=>[
                'attributes'=>['id','channel_name','status'],
                'defaultOrder'=>['id'=>SORT_ASC],
            ]
        ]);
    }
}
```

---

## 4.5. `ReportRecord.php` и `ReportSearch.php`

```php
<?php
namespace app\models;

use yii\base\Model;

class ReportRecord extends Model
{
    public $template_id;
    public $template_name;
    public $template_text;
    public $client_id;
    public $planned_send_date;
    public $actual_send_date;
    public $mobile_phone;
    public $email;
    public $channel;
    public $status;
    public $loan_end_date;

    public function rules()
    {
        return [
            [['template_id'], 'integer'],
            [[
                'template_name','template_text','client_id','mobile_phone',
                'email','channel','status','loan_end_date'
            ], 'string'],
            [['planned_send_date','actual_send_date'], 'safe'],
        ];
    }

    public function attributeLabels()
    {
        return [
            'template_id'       => 'ID Шаблона',
            'template_name'     => 'Наименование шаблона',
            'template_text'     => 'Текст шаблона',
            'client_id'         => 'ID Клиента',
            'planned_send_date' => 'Плановая дата отправки',
            'actual_send_date'  => 'Фактическая дата отправки',
            'mobile_phone'      => 'Мобильный телефон',
            'email'             => 'E-mail',
            'channel'           => 'Канал',
            'status'            => 'Статус уведомления',
            'loan_end_date'     => 'Дата окончания срока кредита',
        ];
    }

    public static function fromArray($arr)
    {
        $m = new self();
        $m->attributes = $arr;
        return $m;
    }
}
```

```php
<?php
namespace app\models;

use yii\base\Model;
use yii\data\ArrayDataProvider;
use app\services\FakeReportService;

class ReportSearch extends Model
{
    public $template_id;
    public $template_name;
    public $client_id;
    public $status;
    public $channel;
    public $mobile_phone;
    public $email;
    public $planned_send_date;
    public $actual_send_date;

    public function rules()
    {
        return [
            [['template_id'], 'integer'],
            [[
                'template_name','client_id','status','channel',
                'mobile_phone','email','planned_send_date','actual_send_date'
            ], 'safe'],
        ];
    }

    public function search($params)
    {
        $this->load($params);
        $all = FakeReportService::getAll();

        if ($this->template_id) {
            $all = array_filter($all, fn($r) => $r['template_id']==$this->template_id);
        }
        if ($this->template_name) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['template_name'],$this->template_name)!==false
            );
        }
        if ($this->client_id) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['client_id'],$this->client_id)!==false
            );
        }
        if ($this->status) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['status'],$this->status)!==false
            );
        }
        if ($this->channel) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['channel'],$this->channel)!==false
            );
        }
        if ($this->mobile_phone) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['mobile_phone'],$this->mobile_phone)!==false
            );
        }
        if ($this->email) {
            $all = array_filter($all, fn($r)=>
                mb_stripos($r['email'],$this->email)!==false
            );
        }
        if ($this->planned_send_date) {
            $all = array_filter($all, fn($r)=>
                isset($r['planned_send_date']) && $r['planned_send_date']==$this->planned_send_date
            );
        }
        if ($this->actual_send_date) {
            $all = array_filter($all, fn($r)=>
                isset($r['actual_send_date']) && $r['actual_send_date']==$this->actual_send_date
            );
        }

        return new ArrayDataProvider([
            'allModels' => array_values($all),
            'pagination'=>['pageSize'=>10],
            'sort'=>[
                'attributes'=>[
                    'template_id','template_name','client_id','status',
                    'planned_send_date','actual_send_date'
                ],
            ],
        ]);
    }
}
```

---

# 5. Сервисы (папка `services/`)

## 5.1. `FakeTemplateService.php`

```php
<?php
namespace app\services;

/**
 * Мок-сервис для шаблонов
 */
class FakeTemplateService
{
    private static $templates = [
        [
            'template_id'    => 1,
            'template_name'  => 'Уведомление об оплате',
            'contract_id'    => 'CTR-001',
            'client_id'      => 'CUST-100',
            'product'        => 'PRODUCT_A',
            'client_segment' => 'SEGMENT_X',
            'creation_date'  => '2024-07-24',
            'status'         => 'Active',
            'send_date'      => null,
            'send_status'    => 'Pending',
            'mobile_phone'   => '+79990001122',
            'email'          => 'client@example.com',
            'channel'        => 'SMS',
            'comment'        => null,
        ],
        [
            'template_id'    => 2,
            'template_name'  => 'Напоминание о продлении',
            'contract_id'    => 'CTR-002',
            'client_id'      => 'CUST-200',
            'product'        => 'PRODUCT_B',
            'client_segment' => 'SEGMENT_Y',
            'creation_date'  => '2024-07-20',
            'status'         => 'Error',
            'send_date'      => '2024-07-24',
            'send_status'    => 'Error',
            'mobile_phone'   => '+78880005566',
            'email'          => 'someone@domain.com',
            'channel'        => 'EMAIL',
            'comment'        => 'Ошибка отправки: неверный email',
        ],
    ];

    public static function getAll()
    {
        return self::$templates;
    }

    public static function getById($id)
    {
        foreach (self::$templates as $t) {
            if ($t['template_id']==$id) {
                return $t;
            }
        }
        return null;
    }

    public static function save($data)
    {
        // Для демо достаточно вернуть то, что получили (mock).
        return $data;
    }
}
```

## 5.2. `FakeChannelService.php`

```php
<?php
namespace app\services;

class FakeChannelService
{
    private static $channels = [
        [
            'id'           => 1,
            'channel_name' => 'SMS',
            'description'  => 'Отправка коротких сообщений',
            'status'       => 'Active',
            'max_length'   => 160,
            'time_window'  => '24/7',
        ],
        [
            'id'           => 2,
            'channel_name' => 'E-mail',
            'description'  => 'Уведомления по электронной почте',
            'status'       => 'Stopped',
            'max_length'   => null,
            'time_window'  => '24/7',
        ],
    ];

    public static function getAll()
    {
        return self::$channels;
    }

    public static function getById($id)
    {
        foreach (self::$channels as $c) {
            if ($c['id']==$id) {
                return $c;
            }
        }
        return null;
    }

    public static function save($data)
    {
        return $data;
    }
}
```

## 5.3. `FakeReportService.php`

```php
<?php
namespace app\services;

/**
 * Мок-сервис для отчётов
 */
class FakeReportService
{
    private static $reportData = [
        [
            'template_id'       => 1001,
            'template_name'     => 'Уведомление об оплате',
            'template_text'     => 'Оплатите до 25-го числа',
            'client_id'         => 'CUST-000123',
            'planned_send_date' => '2024-07-24',
            'actual_send_date'  => '2024-07-24',
            'mobile_phone'      => '+79990001122',
            'email'             => 'client@example.com',
            'channel'           => 'SMS',
            'status'            => 'Sent',
            'loan_end_date'     => '2025-01-10',
        ],
        [
            'template_id'       => 1002,
            'template_name'     => 'Reminder of extension',
            'template_text'     => 'Policy is about to expire',
            'client_id'         => 'CUST-100500',
            'planned_send_date' => '2024-07-25',
            'actual_send_date'  => null,
            'mobile_phone'      => '+78880005566',
            'email'             => 'someone@domain.com',
            'channel'           => 'EMAIL',
            'status'            => 'Pending',
            'loan_end_date'     => '2024-12-31',
        ],
    ];

    public static function getAll()
    {
        return self::$reportData;
    }
}
```

---

# 6. Представления (views/)

## 6.1. `views/site/index.php` — стартовая страница

```php
<?php
/** @var yii\web\View $this */
use yii\helpers\Html;

$this->title = 'Главная страница';
?>
<div class="site-index">
    <h1>Добро пожаловать!</h1>
    <p>Это пример стартовой страницы нашего проекта на Yii2.</p>

    <p>
        Перейти к:
        <?= Html::a('Шаблоны уведомлений (NOTIFMGR)', ['template/index'], ['class'=>'btn btn-primary']) ?>
        <?= Html::a('Управление каналами', ['channel/index'], ['class'=>'btn btn-success']) ?>
        <?= Html::a('Модуль отчётности', ['report/index'], ['class'=>'btn btn-warning']) ?>
    </p>
</div>
```

*(Можно добавить ещё контента по вкусу.)*

---

## 6.2. Модуль шаблонов (views/template/)

### 6.2.1. `index.php`

```php
<?php
use yii\helpers\Html;
use yii\grid\GridView;

/** @var yii\web\View $this */
/** @var app\models\TemplateSearch $searchModel */
/** @var yii\data\ArrayDataProvider $dataProvider */

$this->title = 'Шаблоны уведомлений';
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="template-index">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Создать шаблон', ['create'], ['class'=>'btn btn-success']) ?>
        <?= Html::a('Выгрузить в CSV', ['export'], [
            'class'=>'btn btn-info',
            // при необходимости передаём get-параметры: ?... 
        ]) ?>
    </p>

    <?= GridView::widget([
        'dataProvider'=>$dataProvider,
        'filterModel'=>$searchModel,
        'columns'=>[
            'template_id',
            'template_name',
            'client_id',
            'channel',
            [
                'attribute'=>'creation_date',
                'label'=>'Дата создания',
            ],
            'status',
            [
                'class'=>'yii\grid\ActionColumn',
                'template'=>'{view} {update}',
            ]
        ],
    ]) ?>
</div>
```

### 6.2.2. `view.php`

```php
<?php
use yii\helpers\Html;
use yii\widgets\DetailView;

/** @var yii\web\View $this */
/** @var app\models\Template $model */

$this->title = $model->template_name;
$this->params['breadcrumbs'][] = ['label' => 'Шаблоны уведомлений', 'url' => ['index']];
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="template-view">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Редактировать', ['update','id'=>$model->template_id], ['class'=>'btn btn-primary']) ?>
        <?= Html::a('К списку', ['index'], ['class'=>'btn btn-default']) ?>
    </p>

    <?= DetailView::widget([
        'model'=>$model,
        'attributes'=>[
            'template_id',
            'template_name',
            'contract_id',
            'client_id',
            'product',
            'client_segment',
            'creation_date',
            'status',
            'send_date',
            'send_status',
            'mobile_phone',
            'email',
            'channel',
            'comment',
        ],
    ]) ?>
</div>
```

### 6.2.3. `create.php`

```php
<?php
use yii\helpers\Html;

/** @var yii\web\View $this */
/** @var app\models\Template $model */

$this->title = 'Создать новый шаблон';
$this->params['breadcrumbs'][] = ['label'=>'Шаблоны уведомлений','url'=>['index']];
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="template-create">
    <h1><?= Html::encode($this->title) ?></h1>

    <?= $this->render('_form',['model'=>$model]) ?>
</div>
```

### 6.2.4. `update.php`

```php
<?php
use yii\helpers\Html;

/** @var yii\web\View $this */
/** @var app\models\Template $model */

$this->title = 'Редактировать шаблон: '.$model->template_name;
$this->params['breadcrumbs'][] = ['label'=>'Шаблоны уведомлений','url'=>['index']];
$this->params['breadcrumbs'][] = ['label'=>$model->template_name,'url'=>['view','id'=>$model->template_id]];
$this->params['breadcrumbs'][] = 'Редактировать';
?>
<div class="template-update">
    <h1><?= Html::encode($this->title) ?></h1>

    <?= $this->render('_form',['model'=>$model]) ?>
</div>
```

### 6.2.5. `_form.php`

```php
<?php
use yii\helpers\Html;
use yii\widgets\ActiveForm;

/** @var yii\web\View $this */
/** @var app\models\Template $model */
/** @var yii\widgets\ActiveForm $form */
?>

<div class="template-form">
    <?php $form = ActiveForm::begin(); ?>

    <?= $form->field($model, 'template_name')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'contract_id')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'client_id')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'product')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'client_segment')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'creation_date')->textInput(['placeholder'=>'YYYY-MM-DD']) ?>
    <?= $form->field($model, 'status')->dropDownList([
        'Active'=>'Active','Error'=>'Error','Stopped'=>'Stopped','Pending'=>'Pending'
    ], ['prompt'=>'Выберите статус шаблона']) ?>
    <?= $form->field($model, 'send_date')->textInput(['placeholder'=>'YYYY-MM-DD']) ?>
    <?= $form->field($model, 'send_status')->dropDownList([
        'Sent'=>'Sent','Error'=>'Error','Pending'=>'Pending','Stopped'=>'Stopped'
    ], ['prompt'=>'Выберите статус отправки']) ?>
    <?= $form->field($model, 'mobile_phone')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'email')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'channel')->dropDownList([
        'SMS'=>'SMS','EMAIL'=>'E-mail','ENTER/MB/MCSP'=>'ENTER/MB/MCSP'
    ], ['prompt'=>'Выберите канал']) ?>
    <?= $form->field($model, 'comment')->textarea(['rows'=>3]) ?>

    <div class="form-group">
        <?= Html::submitButton('Сохранить',['class'=>'btn btn-success']) ?>
        <?= Html::a('Отмена',['index'],['class'=>'btn btn-default']) ?>
    </div>

    <?php ActiveForm::end(); ?>
</div>
```

---

## 6.3. Модуль каналов (views/channel/)

(аналогично)

### 6.3.1. `index.php`

```php
<?php
use yii\helpers\Html;
use yii\grid\GridView;

/** @var yii\web\View $this */
/** @var app\models\ChannelSearch $searchModel */
/** @var yii\data\ArrayDataProvider $dataProvider */

$this->title = 'Управление каналами';
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="channel-index">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Создать канал', ['create'], ['class'=>'btn btn-success']) ?>
    </p>

    <?= GridView::widget([
        'dataProvider'=>$dataProvider,
        'filterModel'=>$searchModel,
        'columns'=>[
            'id',
            'channel_name',
            'status',
            'max_length',
            'time_window',
            [
                'class'=>'yii\grid\ActionColumn',
                'template'=>'{view} {stop} {resume}',
                'buttons'=>[
                    'view'=>function($url,$model){
                        return Html::a('Открыть',['view','id'=>$model['id']],['class'=>'btn btn-link']);
                    },
                    'stop'=>function($url,$model){
                        if($model['status']!='Stopped'){
                            return Html::a('Остановить',['stop','id'=>$model['id']],[
                                'class'=>'btn btn-warning',
                                'data'=>[
                                    'confirm'=>'Приостановить канал?',
                                    'method'=>'post'
                                ]
                            ]);
                        }
                        return '';
                    },
                    'resume'=>function($url,$model){
                        if($model['status']=='Stopped'){
                            return Html::a('Продолжить',['resume','id'=>$model['id']],[
                                'class'=>'btn btn-success',
                                'data'=>[
                                    'confirm'=>'Возобновить канал?',
                                    'method'=>'post'
                                ]
                            ]);
                        }
                        return '';
                    },
                ],
            ],
        ]
    ]) ?>
</div>
```

### 6.3.2. `view.php`

```php
<?php
use yii\helpers\Html;
use yii\widgets\DetailView;

/** @var yii\web\View $this */
/** @var app\models\Channel $model */

$this->title = $model->channel_name;
$this->params['breadcrumbs'][] = ['label'=>'Управление каналами','url'=>['index']];
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="channel-view">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Редактировать',['update','id'=>$model->id],['class'=>'btn btn-primary']) ?>
        <?= Html::a('К списку',['index'],['class'=>'btn btn-default']) ?>
        <?php if ($model->status!=='Stopped'): ?>
            <?= Html::a('Остановить',['stop','id'=>$model->id],[
                'class'=>'btn btn-warning',
                'data'=>[
                    'confirm'=>'Приостановить канал?',
                    'method'=>'post'
                ]
            ]) ?>
        <?php else: ?>
            <?= Html::a('Продолжить',['resume','id'=>$model->id],[
                'class'=>'btn btn-success',
                'data'=>[
                    'confirm'=>'Возобновить канал?',
                    'method'=>'post'
                ]
            ]) ?>
        <?php endif; ?>
    </p>

    <?= DetailView::widget([
        'model'=>$model,
        'attributes'=>[
            'id',
            'channel_name',
            'description',
            'status',
            'max_length',
            'time_window',
        ],
    ]) ?>
</div>
```

### 6.3.3. `create.php`

```php
<?php
use yii\helpers\Html;

/** @var yii\web\View $this */
/** @var app\models\Channel $model */

$this->title = 'Создать канал';
$this->params['breadcrumbs'][] = ['label'=>'Управление каналами','url'=>['index']];
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="channel-create">
    <h1><?= Html::encode($this->title) ?></h1>

    <?= $this->render('_form',['model'=>$model]) ?>
</div>
```

### 6.3.4. `update.php`

```php
<?php
use yii\helpers\Html;

/** @var yii\web\View $this */
/** @var app\models\Channel $model */

$this->title = 'Редактировать канал: '.$model->channel_name;
$this->params['breadcrumbs'][] = ['label'=>'Управление каналами','url'=>['index']];
$this->params['breadcrumbs'][] = ['label'=>$model->channel_name,'url'=>['view','id'=>$model->id]];
$this->params['breadcrumbs'][] = 'Редактировать';
?>
<div class="channel-update">
    <h1><?= Html::encode($this->title) ?></h1>

    <?= $this->render('_form',['model'=>$model]) ?>
</div>
```

### 6.3.5. `_form.php`

```php
<?php
use yii\helpers\Html;
use yii\widgets\ActiveForm;

/** @var yii\web\View $this */
/** @var app\models\Channel $model */
/** @var yii\widgets\ActiveForm $form */
?>

<div class="channel-form">
    <?php $form = ActiveForm::begin(); ?>

    <?= $form->field($model, 'channel_name')->textInput(['maxlength'=>true]) ?>
    <?= $form->field($model, 'description')->textarea(['rows'=>2]) ?>
    <?= $form->field($model, 'status')->dropDownList([
        'Active'=>'Active','Stopped'=>'Stopped','Maintenance'=>'Maintenance'
    ],['prompt'=>'Выберите статус']) ?>
    <?= $form->field($model, 'max_length')->textInput(['type'=>'number']) ?>
    <?= $form->field($model, 'time_window')->textInput(['maxlength'=>true]) ?>

    <div class="form-group">
        <?= Html::submitButton('Сохранить',['class'=>'btn btn-success']) ?>
        <?= Html::a('Отмена',['index'],['class'=>'btn btn-default']) ?>
    </div>

    <?php ActiveForm::end(); ?>
</div>
```

---

## 6.4. Модуль отчётности (views/report/)

### 6.4.1. `index.php`

```php
<?php
use yii\helpers\Html;
use yii\grid\GridView;

/** @var yii\web\View $this */
/** @var app\models\ReportSearch $searchModel */
/** @var yii\data\ArrayDataProvider $dataProvider */

$this->title = 'Модуль отчётности';
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="report-index">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Сформировать оперативный отчёт',['operational'],['class'=>'btn btn-primary']) ?>
        <?= Html::a('Сформировать исторический отчёт',['historical'],['class'=>'btn btn-warning']) ?>
        <?= Html::a('Выгрузить',['export'],['class'=>'btn btn-success']) ?>
    </p>

    <?= GridView::widget([
        'dataProvider'=>$dataProvider,
        'filterModel'=>$searchModel,
        'columns'=>[
            'template_id',
            'template_name',
            'client_id',
            'status',
            'channel',
            'mobile_phone',
            'email',
            'planned_send_date',
            'actual_send_date',
        ]
    ]) ?>
</div>
```

### 6.4.2. `operational.php`

```php
<?php
use yii\helpers\Html;
use yii\grid\GridView;

/** @var yii\web\View $this */
/** @var app\models\ReportSearch $searchModel */
/** @var yii\data\ArrayDataProvider $dataProvider */

$this->title = 'Оперативный отчёт';
$this->params['breadcrumbs'][] = ['label'=>'Модуль отчётности','url'=>['index']];
$this->params['breadcrumbs'][] = $this->title;
?>
<div class="report-operational">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>
        <?= Html::a('Вернуться к общему списку отчётов',['index'],['class'=>'btn btn-default']) ?>
    </p>

    <?= GridView::widget([
        'dataProvider'=>$dataProvider,
        // без filterModel, если не хотим фильтра на этой странице
        'columns'=>[
            'template_id',
            'template_name',
            'client_id',
            'status',
            'channel',
            'mobile_phone',
            'email',
            'planned_send_date',
            'actual_send_date',
        ]
    ]) ?>
</div>
```

*(Если нужен `historical.php`, можно сделать аналогичную страницу, но в примере у нас выгрузка CSV идёт напрямую.)*

---

# 7. Запуск и использование

1. **Установите зависимости**: `composer install` (в папке `my_project`).
2. Убедитесь, что `web/index.php` настроен на подключение `config/web.php`.
3. Запустите встроенный сервер Yii2:
   ```bash
   php yii serve
   ```
4. Откройте в браузере:
   ```
   http://localhost:8080
   ```
   (по умолчанию) — отобразится **стартовая страница** (SiteController /index).

Там будут ссылки на:
- «Шаблоны уведомлений» → `template/index`
- «Управление каналами» → `channel/index`
- «Модуль отчётности» → `report/index`

Все данные берутся из **mock-сервисов** (`FakeTemplateService`, `FakeChannelService`, `FakeReportService`). Можно расширять их логику, подключать БД, делать реальные запросы, и т. п.

---

# 8. Итог

Вы получили **полное дерево файлов** и **подробный код** для:

- **SiteController** (стартовая страница)
- **TemplateController** + views (модуль NOTIFMGR)
- **ChannelController** + views (управление каналами)
- **ReportController** + views (модуль отчётности)
- Модели (`Template`, `Channel`, `ReportRecord` + их *Search-модели*)
- Мок-сервисы (Fake*Service)

Такой проект можно сразу использовать как «каркас», в котором вы будете дописывать бизнес-логику, менять mock-настоящие сервисы, и т. д.

Чтобы **упаковать** всё в архив для передачи:
- Перейдите в каталог на уровень выше `my_project`
- Создайте zip: `zip -r my_project.zip my_project/` (или используйте GUI-архиватор)
- Всё: у вас есть архив со **всеми файлами** проекта.

Поздравляем, теперь у вас **полноценный стартовый проект** на Yii2!